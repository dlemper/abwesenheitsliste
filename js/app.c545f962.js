(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/abwesenheitsliste/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"07cd":function(e,t,n){"use strict";var a=n("4160"),s=n.n(a);s.a},4160:function(e,t,n){},"424b":function(e,t,n){},4617:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=n("289d"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav-bar",{on:{download:function(t){return e.downloadData()},upload:e.upload}}),n("div",{attrs:{id:"container is-fluid"}},[n("b-table",{ref:"table",attrs:{data:e.personen,detailed:"",hoverable:"","custom-detail-row":"","default-sort":"nachname","show-detail-icon":""},scopedSlots:e._u([{key:"detail",fn:function(t){return e._l(t.row.abwesenheiten,(function(a,s){return n("tr",{key:s,staticClass:"has-background-light"},[n("td"),n("td"),n("td",[e._v(e._s("krank"===a.art?"Krank":"Krank mit Kind"))]),n("td",{staticClass:"has-text-centered"},[e._v(e._s(e._f("date")(a.von)))]),n("td",{staticClass:"has-text-centered"},[e._v(e._s(e._f("date")(a.bis)))]),n("td",[n("div",{staticClass:"buttons has-addons"},[n("b-button",{attrs:{"icon-left":"trash-alt",size:"is-small",type:"is-danger"},on:{click:function(n){return e.openDeleteAbwesenheitModal(t.row,a)}}}),n("b-button",{attrs:{"icon-left":"pencil-alt",size:"is-small"},on:{click:function(n){return e.openAddAbwesenheitModal(t.row,a)}}})],1)])])}))}}])},[n("b-table-column",{attrs:{field:"nachname",label:"Nachname",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[[e._v(e._s(t.row.nachname))]]}}])}),n("b-table-column",{attrs:{field:"vorname",label:"Vorname",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.vorname)+" ")]}}])}),n("b-table-column",{attrs:{label:"Krank",numeric:"",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.anzahlAbwesenheitstage(t.row.abwesenheiten)))]}}])}),n("b-table-column",{attrs:{label:"Krank mit Kind",numeric:"",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.anzahlKrankMitKind(t.row.abwesenheiten)))]}}])}),n("b-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[n("b-button",{staticClass:"is-add-btn",attrs:{"icon-left":"plus",size:"is-small",type:"is-success"},on:{click:function(t){return e.openAddPersonModal()}}})]},proxy:!0},{key:"default",fn:function(t){return[n("div",{staticClass:"buttons has-addons"},[n("b-button",{attrs:{"icon-left":"trash-alt",size:"is-small",type:"is-danger"},on:{click:function(n){return e.openDeletePersonModal(t.row)}}}),n("b-button",{attrs:{"icon-left":"pencil-alt",size:"is-small"},on:{click:function(n){return e.openAddPersonModal(t.row)}}}),n("b-button",{attrs:{"icon-left":"plus",size:"is-small",type:"is-success"},on:{click:function(n){return e.openAddAbwesenheitModal(t.row)}}})],1)]}}])}),n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[e._v("Keine Abwesenheiten eingetragen.")])])])])],2)],1)],1)},i=[],o=(n("99af"),n("4de4"),n("41606"),n("caad"),n("c975"),n("d81d"),n("13d5"),n("d3b7"),n("07ac"),n("2532"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("2909")),c=(n("96cf"),n("1da1")),l=n("5530"),u=n("feb8"),d=n("e3ee"),f=n("4bb6"),b=n("80b4"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{type:"is-info"}},[n("template",{slot:"brand"},[n("b-navbar-item",{staticClass:"is-size-5 has-text-weight-bold",attrs:{tag:"div"}},[e._v(" Abwesenheitsliste ")])],1),n("template",{slot:"end"},[n("b-navbar-item",{attrs:{href:"https://github.com/dlemper/abwesenheitsliste"}},[n("b-icon",{attrs:{pack:"fab",icon:"github"}})],1),n("b-navbar-item",{attrs:{tag:"div"}},[n("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Coat_of_arms_of_Lower_Saxony.svg/26px-Coat_of_arms_of_Lower_Saxony.svg.png"}})]),n("b-navbar-item",{attrs:{tag:"div"}},[n("div",{staticClass:"buttons"},[n("b-upload",{on:{input:function(t){return e.$emit("upload",t)}}},[n("a",{staticClass:"button is-light"},[n("b-icon",{attrs:{icon:"upload",size:"is-small"}}),n("span",[e._v("Upload")])],1)]),n("b-button",{attrs:{type:"is-light","icon-left":"download"},on:{click:function(t){return e.$emit("download")}}},[e._v(" Download ")])],1)])],1)],2)},p=[],m=n("2877"),v={},w=Object(m["a"])(v,h,p,!1,null,null,null),y=w.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),n("section",{staticClass:"modal-card-body"},[n("b-field",{attrs:{label:"Vorname"}},[n("b-input",{attrs:{type:"text",placeholder:"Erika",required:""},model:{value:e.person.vorname,callback:function(t){e.$set(e.person,"vorname",t)},expression:"person.vorname"}})],1),n("b-field",{attrs:{label:"Nachname"}},[n("b-input",{attrs:{type:"text",placeholder:"Mustermann",required:""},model:{value:e.person.nachname,callback:function(t){e.$set(e.person,"nachname",t)},expression:"person.nachname"}})],1)],1),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" Abbrechen ")]),n("button",{staticClass:"button is-primary",on:{click:function(t){return e.save()}}},[e._v(" Speichern ")])])])},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("Person hinzufügen")])])}],k=(n("a9e3"),{name:"add-person-modal",props:{person:{type:Object,default:function(){return{vorname:"",nachname:"",abwesenheiten:[]}}},index:{type:Number,default:function(){return-1}}},methods:{save:function(){this.$emit("save",this.person,this.index),this.$parent.close()}}}),O=k,j=(n("07cd"),Object(m["a"])(O,g,_,!1,null,"4f600e73",null)),C=j.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),n("section",{staticClass:"modal-card-body"},[n("b-field",{attrs:{label:"Art"}},[n("b-select",{attrs:{required:""},model:{value:e.abwesenheit.art,callback:function(t){e.$set(e.abwesenheit,"art",t)},expression:"abwesenheit.art"}},[n("option",{attrs:{value:"krank"}},[e._v("Krank")]),n("option",{attrs:{value:"krankMitKind"}},[e._v("Krank mit Kind")])])],1),n("b-field",{attrs:{label:"Zeitraum"}},[n("b-datepicker",{attrs:{inline:"","unselectable-days-of-week":[0,6],"first-day-of-week":1,indicators:"bars",events:e.events,"mobile-native":!1,"month-names":e.monthNames,"day-names":e.dayNames,"min-date":e.minDate,"max-date":e.maxDate,range:"",required:""},model:{value:e.zeitraum,callback:function(t){e.zeitraum=t},expression:"zeitraum"}})],1)],1),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" Abbrechen ")]),n("button",{staticClass:"button is-primary",on:{click:function(t){return e.save()}}},[e._v(" Speichern ")])])])},A=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("Abwesenheit hinzufügen")])])}],M=(n("ac1f"),n("5319"),n("3f5e")),$=n("2cf3"),D=n("c10a"),S=function(e){return Object($["a"])("".concat(e,"Z"),"yyyy-MM-ddX",new Date)},z={name:"add-abwesenheit-modal",props:{person:Object,abwesenheit:{type:Object,default:function(){return{von:"",bis:"",art:"krank"}}},index:{type:Number,default:function(){return-1}},feiertage:Array},data:function(){return{zeitraum:null,bundesland:"NI"}},computed:{years:function(){var e=(new Date).getFullYear();return[e-1,e,e+1]},events:function(){return this.feiertage},monthNames:function(){return Object(o["a"])(Array(12).keys()).map((function(e){return M["a"].localize.month(e,{width:"wide"})}))},dayNames:function(){return Object(o["a"])(Array(7).keys()).map((function(e){return M["a"].localize.day(e,{width:"abbreviated"})})).map((function(e){return e.replace(".","")}))},minDate:function(){return this.years.length>0?new Date(this.years[0],0):void 0},maxDate:function(){return this.years.length>0?Object(D["a"])(new Date(this.years[this.years.length-1],0)):void 0}},methods:{save:function(){this.$emit("save",this.person,Object(l["a"])(Object(l["a"])({},this.abwesenheit),{},{von:Object(f["a"])(this.zeitraum[0],"yyyy-MM-dd"),bis:Object(f["a"])(this.zeitraum[1],"yyyy-MM-dd")}),this.index),this.$parent.close()}},mounted:function(){this.abwesenheit&&this.abwesenheit.von.length>0&&this.abwesenheit.bis.length>0&&(this.zeitraum=[S(this.abwesenheit.von),S(this.abwesenheit.bis)])}},K=z,P=(n("d648"),Object(m["a"])(K,x,A,!1,null,"59e3dc6f",null)),N=P.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v(e._s(e.person.vorname)+" "+e._s(e.person.nachname)+" löschen?")])]),n("section",{staticClass:"modal-card-body"},[e._v(" Wollen Sie "+e._s(e.person.vorname)+" "+e._s(e.person.nachname)+" wirklich löschen? ")]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" Abbrechen ")]),n("button",{staticClass:"button is-danger",on:{click:function(t){return e.save()}}},[e._v(" Löschen ")])])])},F=[],L={name:"delete-person-modal",props:{person:Object},methods:{save:function(){this.$emit("save",this.person),this.$parent.close()}}},T=L,q=(n("c1da"),Object(m["a"])(T,E,F,!1,null,"294acf5d",null)),I=q.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),n("section",{staticClass:"modal-card-body"},[e._v(" Wollen Sie Abwesenheit "+e._s("krank"===e.abwesenheit.art?"Krank":"Krank mit Kind")+" "+e._s(e._f("date")(e.abwesenheit.von))+" - "+e._s(e._f("date")(e.abwesenheit.bis))+" wirklich löschen? ")]),n("footer",{staticClass:"modal-card-foot"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v(" Abbrechen ")]),n("button",{staticClass:"button is-danger",on:{click:function(t){return e.save()}}},[e._v(" Löschen ")])])])},J=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v(" Abwesenheit löschen? ")])])}],B=function(e){return Object($["a"])("".concat(e,"Z"),"yyyy-MM-ddX",new Date)},U={name:"delete-abwesenheit-modal",props:{person:Object,abwesenheit:Object},methods:{save:function(){this.$emit("save",this.person,this.abwesenheit),this.$parent.close()}},filters:{date:function(e){return e?Intl.DateTimeFormat(window.navigator.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(B(e)):""}}},Z=U,V=(n("eb52"),Object(m["a"])(Z,R,J,!1,null,"77a19857",null)),W=V.exports,X={name:"app",components:{NavBar:y},data:function(){return{neueAbwesenheit:{art:"krank"},bundesland:"NI",feiertage:[],personen:[{vorname:"",nachname:"",abwesenheiten:[]}]}},computed:{years:function(){var e=(new Date).getFullYear();return[e-1,e,e+1]}},methods:{addAbwesenheit:function(e,t,n){-1===n?e.abwesenheiten.push(t):(e.abwesenheiten[n]=t,this.$refs.table.toggleDetails(e),this.$refs.table.toggleDetails(e))},addPerson:function(e,t){-1===t?this.personen.push(Object(l["a"])({abwesenheiten:[]},e)):this.personen[t]=e},deletePerson:function(e){this.personen=this.personen.filter((function(t){return t!==e}))},deleteAbwesenheit:function(e,t){e.abwesenheiten=e.abwesenheiten.filter((function(e){return e!==t}))},anzahlAbwesenheitstage:function(e){var t=this;return e.filter((function(e){return"krank"===e.art})).reduce((function(e,n){return e+Object(u["a"])({start:Object(d["a"])(n.von),end:Object(d["a"])(n.bis)}).filter((function(e){return!t.feiertage.includes(Object(f["a"])(e,"yyyy-MM-dd"))})).filter((function(e){return!Object(b["a"])(e)})).length}),0)},anzahlKrankMitKind:function(e){var t=this;return this.feiertage.length>0?e.filter((function(e){return"krankMitKind"===e.art})).reduce((function(e,n){return e+Object(u["a"])({start:Object(d["a"])(n.von),end:Object(d["a"])(n.bis)}).filter((function(e){return!t.feiertage.includes(Object(f["a"])(e,"yyyy-MM-dd"))})).filter((function(e){return!Object(b["a"])(e)})).length}),0):""},openModal:function(e,t,n){this.$buefy.modal.open({parent:this,component:e,hasModalCard:!0,props:t,events:n})},openAddPersonModal:function(e){this.openModal(C,{person:e,index:this.personen.indexOf(e)},{save:this.addPerson})},openAddAbwesenheitModal:function(e,t){this.openModal(N,{person:e,abwesenheit:t,index:e.abwesenheiten.indexOf(t),feiertage:this.feiertage},{save:this.addAbwesenheit})},openDeletePersonModal:function(e){this.openModal(I,{person:e},{save:this.deletePerson})},openDeleteAbwesenheitModal:function(e,t){this.openModal(W,{person:e,abwesenheit:t},{save:this.deleteAbwesenheit})},downloadDataAsFile:function(e,t){var n=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.href=n,a.setAttribute("download",e),document.body.appendChild(a),a.click()},downloadData:function(){this.downloadDataAsFile("Abwesenheitsliste-".concat(Object(f["a"])(new Date,"yyyy-MM-dd"),".json"),JSON.stringify({bundesland:this.bundesland,personen:this.personen}))},upload:function(e){var t=this,n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result);t.personen=n.personen,t.bundesland=n.bundesland},n.readAsText(e)}},mounted:function(){var e=this;this.personen=[],Promise.all(this.years.map((function(t){return fetch("https://feiertage-api.de/api/?jahr=".concat(t,"&nur_land=").concat(e.bundesland))}))).then((function(t){t.forEach(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.ok){t.next=5;break}return t.next=3,n.json();case 3:s=t.sent,(a=e.feiertage).push.apply(a,Object(o["a"])(Object.values(s).map((function(e){return Object(d["a"])(e.datum)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).catch(console.error)},filters:{date:function(e){return e?Intl.DateTimeFormat(window.navigator.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(Object(d["a"])(e)):""}}},Y=X,G=(n("034f"),Object(m["a"])(Y,r,i,!1,null,null,null)),H=G.exports,Q=n("9483");Object(Q["a"])("".concat("/abwesenheitsliste/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("7e7d");a["a"].use(s["a"],{defaultIconPack:"fas"}),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(H)}}).$mount("#app")},"7e7d":function(e,t,n){},"85ec":function(e,t,n){},c1da:function(e,t,n){"use strict";var a=n("424b"),s=n.n(a);s.a},ca94:function(e,t,n){},d648:function(e,t,n){"use strict";var a=n("4617"),s=n.n(a);s.a},eb52:function(e,t,n){"use strict";var a=n("ca94"),s=n.n(a);s.a}});
//# sourceMappingURL=app.c545f962.js.map